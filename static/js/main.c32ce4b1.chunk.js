(this.webpackJsonpcookingbook=this.webpackJsonpcookingbook||[]).push([[0],{125:function(e,t,n){e.exports={loader:"Loader_loader__PZgQS"}},126:function(e,t,n){e.exports=n.p+"static/media/Spinner-1s-200px.b34c8640.svg"},130:function(e,t,n){e.exports={error:"Form_error__1sUOT"}},134:function(e,t,n){e.exports=n.p+"static/media/article.47b871b8.svg"},135:function(e,t,n){e.exports=n.p+"static/media/add.82ddb728.svg"},136:function(e,t,n){e.exports=n.p+"static/media/login.71e812df.svg"},137:function(e,t,n){e.exports=n.p+"static/media/logout.9956934d.svg"},164:function(e,t,n){e.exports=n(290)},169:function(e,t,n){},170:function(e,t,n){},20:function(e,t,n){e.exports={wrapAutorization:"SignUp_wrapAutorization__1C_zl",title:"SignUp_title__2Qq-P",Field:"SignUp_Field__2Tm9F",btn:"SignUp_btn__NV3O9",summeryError:"SignUp_summeryError__3az03",done:"SignUp_done__3wrsG"}},290:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(62),c=n.n(o),i=(n(169),n(170),n(31)),s=n(24),u=n(25),l=n(28),m=n(26),d=n(29),p=n(86),g=n.n(p),f=n(8),_=n(125),b=n.n(_),E=n(126),h=n.n(E),v=function(){return a.a.createElement("div",null,a.a.createElement("img",{src:h.a,alt:"louder",className:b.a.loader}))},O=n(39),P=n(127).create({baseURL:"http://smktesting.herokuapp.com/api/"}),S=function(){return P.get("products/").then((function(e){return e.data}))},N=function(e,t,n){return P.post("products/",{title:e,img:t,text:n})},j=function(e){return P.get("reviews/".concat(e)).then((function(e){return e.data}))},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return P.post("reviews/".concat(e),{rate:n,text:r},{headers:{AUTHORIZATION:"Token "+t}})},C=function(e,t){return P.post("login/",{username:e,password:t})},w=function(e,t){return P.post("register/",{username:e,password:t})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={products:[],product:[],postProduct:!1,isLoaded:!1},T=function(e){return{type:"ADD-ALL-PRODUCTS",products:e,isLoaded:!0}},D=function(e){return{type:"POST-PRODUCT",success:e}},I=function(e){return{type:"ADD-PRODUCT",id:e,isLoaded:!0}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){S().then((function(n){t(T(n)),t(I(e))}))}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-ALL-PRODUCTS":return x({},e,{products:t.products,isLoaded:t.isLoaded});case"ADD-PRODUCT":return x({},e,{product:e.products.filter((function(e){return e.id===+t.id})),isLoaded:t.isLoaded});case"POST-PRODUCT":return x({},e,{postProduct:t.success});default:return e}},R=n(44),F=n.n(R),z=n(65),M=n.n(z),B=n(9),J=function(e){var t=e.img.match(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g);return a.a.createElement("div",{className:F.a.product},a.a.createElement("h1",{className:F.a.title},e.title),a.a.createElement("div",{className:F.a.text},e.text),a.a.createElement("img",{src:t||M.a,alt:"img",className:F.a.img}),a.a.createElement(B.b,{to:"product/"+e.id,className:F.a.seeMore},"See more>>"))},q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllProductsThunkCreator()}},{key:"render",value:function(){return a.a.createElement("div",null,this.props.isLoaded?null:a.a.createElement(v,null),a.a.createElement("h1",{className:g.a.productsTitle},"Products"),a.a.createElement("div",{className:g.a.products},this.props.products.map((function(e){return a.a.createElement(J,{title:e.title,text:e.text,key:e.id,id:e.id,img:e.img})}))))}}]),t}(a.a.Component),G=Object(f.b)((function(e){return{isLoaded:e.productsPage.isLoaded,products:e.productsPage.products}}),{getAllProductsThunkCreator:U})(q),V=n(7),W=n(35),Y=n.n(W),H=n(43),Z=n(122),K=function(e){if(!e)return"Field is required"},Q=function(e){return function(t){if(t.length>e)return"Max length of symbol is ".concat(e)}},X=n(129),$=n(130),ee=n.n($),te=function(e){var t=e.input,n=e.meta,r=Object(X.a)(e,["input","meta"]),o=n.submitFailed&&n.error?ee.a.error:"",c=n.submitFailed&&n.error?"".concat(n.error):r.placeholder;return a.a.createElement("div",{className:o},a.a.createElement("textarea",Object.assign({},r,t,{placeholder:c})))},ne=Q(250),re=Object(Z.a)({form:"addProducts"})((function(e){return e.submitSucceeded&&e.reset({title:"",text:"",img:""}),a.a.createElement("form",{className:Y.a.addPrducts,onSubmit:e.handleSubmit},a.a.createElement("div",null,"Product title: ",a.a.createElement("br",null),a.a.createElement(H.a,{component:te,name:"title",validate:[K]},"Product title")),a.a.createElement("div",null,"Product description: ",a.a.createElement("br",null),a.a.createElement(H.a,{component:te,name:"text",className:Y.a.description,validate:[K,ne]}," Product description")),a.a.createElement("div",null,"Photo Url:",a.a.createElement("br",null),a.a.createElement(H.a,{component:te,name:"img",validate:[K]},"Photo Url")),e.error&&a.a.createElement("div",{className:Y.a.summeryError},e.error),e.postProduct&&a.a.createElement("div",{className:Y.a.done},"DONE"),e.error&&a.a.createElement("div",{className:Y.a.summeryError},e.error),a.a.createElement("div",null,a.a.createElement("button",{className:Y.a.addBtn},"Add product")))})),ae=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){var t=e.title,r=e.img,a=e.text;n.props.addProductThunkCreator(t,r,a)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(re,{onSubmit:this.onSubmit,postProduct:this.props.postProduct}))}}]),t}(a.a.Component),oe=Object(V.d)(Object(f.b)((function(e){return{postProduct:e.productsPage.postProduct}}),{addProductThunkCreator:function(e,t,n){return function(r){N(e,t,n).then((function(e){201===e.status&&(r(D(!0)),setTimeout((function(){r(D(!1))}),2e3))}))}}}))(ae),ce=n(52),ie=n.n(ce),se=n(133),ue=n(69),le=n.n(ue),me=function(e){var t=e.img.match(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g);return a.a.createElement("div",null,a.a.createElement("h2",null,e.title),a.a.createElement("div",null,a.a.createElement("img",{src:t||M.a,alt:"alectronic",className:le.a.img})),a.a.createElement("p",{className:le.a.description},"Product Description"),a.a.createElement("div",{className:le.a.text},e.text))};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge={comments:[],isLoaded:!1},fe=function(e){return function(t){j(e).then((function(e){t({type:"ADD-ALL-COMMENTS",comments:e,isLoaded:!0})}))}},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-ALL-COMMENTS":return pe({},e,{comments:t.comments});default:return e}},be=n(91),Ee=n.n(be),he=Object(Z.a)({form:"addProducts"})((function(e){return e.submitSucceeded&&e.reset({text:""}),a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e.handleSubmit},a.a.createElement("div",null,a.a.createElement(H.a,{component:te,name:"text",validate:[K],className:Ee.a.commentsField},"Comment"),a.a.createElement("button",{className:Ee.a.submReview},"Submit Review"))))})),ve=n(132),Oe=n.n(ve),Pe=function(e){return a.a.createElement("div",null,a.a.createElement(Oe.a,{count:5,onChange:e.ratingChanged,size:24,color2:"#ffd700"}))},Se=n(53),Ne=n.n(Se);var je=function(e){return a.a.createElement("li",{className:Ne.a.listComment},a.a.createElement("p",{className:Ne.a.userName},e.userName+" at "+e.created_at),a.a.createElement("p",{className:Ne.a.rate},"Rate: "+e.rate),a.a.createElement("span",{className:Ne.a.comment},"Comment: "+e.text))},ye=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={noAthorization:!1},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.productId;this.props.getAllProductsThunkCreator(e),this.props.getAllCommentsThunkCreator(e)}},{key:"render",value:function(){var e,t=this,n=this.props.comments.map((function(e){return a.a.createElement(je,{userName:e.created_by.username,created_at:e.created_at,rate:e.rate,text:e.text,key:e.id})}));return this.props.product?a.a.createElement("div",{className:ie.a.product},a.a.createElement("div",{className:ie.a.leftPart},a.a.createElement(me,{img:this.props.product.img,title:this.props.product.title,text:this.props.product.text})),a.a.createElement("div",{className:ie.a.rightPart},a.a.createElement(Pe,{ratingChanged:function(t){e=t}}),a.a.createElement(he,{onSubmit:function(n){var r=n.text,a=t.props.match.params.productId,o=t.props.token;o?t.props.postCommentThunkCreator(a,o,e,r):t.setState({noAthorization:!0})},comments:this.props.comments}),this.state.noAthorization&&a.a.createElement("div",{className:ie.a.signError},"You should sign in first"),a.a.createElement("h3",null,"Reviews"),a.a.createElement("ul",null,n))):a.a.createElement(v,null)}}]),t}(a.a.Component),Ce=Object(se.a)(i.f,Object(f.b)((function(e){return{isLoaded:e.productsPage.isLoaded,product:e.productsPage.product[0],comments:e.commentsPage.comments,token:e.auth.token}}),{getAllProductsThunkCreator:U,getAllCommentsThunkCreator:fe,postCommentThunkCreator:function(e,t,n,r){return function(a){y(e,t,n,r).then((function(t){200===t.status&&a(fe(e))}))}}}))(ye),we=n(36),ke=n.n(we),xe=n(134),Ae=n.n(xe),Te=n(135),De=n.n(Te),Ie=n(136),Ue=n.n(Ie),Le=n(137),Re=n.n(Le);var Fe=function(e){var t=function(){e.signoutThunkCreator(null,null,!1)};return a.a.createElement("div",{className:ke.a.navBar},a.a.createElement(B.b,{to:"/addProduct",title:"add product"},a.a.createElement("img",{className:ke.a.icon,src:De.a,alt:"menu"})),a.a.createElement(B.b,{to:"/products",title:"products"},a.a.createElement("img",{className:ke.a.icon,src:Ae.a,alt:"productList"})),e.isSignIn?a.a.createElement(a.a.Fragment,null,a.a.createElement(B.b,{to:"/signin",title:"signout"},a.a.createElement("img",{src:Re.a,alt:"signout",className:ke.a.icon,onClick:t})),a.a.createElement("span",{className:ke.a.login,onClick:t},e.userName)):a.a.createElement(B.b,{to:"/signin",title:"signin"},a.a.createElement("img",{src:Ue.a,alt:"users",className:ke.a.icon})))},ze=n(23);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je={userName:null,token:null,isSignIn:!1,isSignUp:!1},qe=function(e,t,n){return{type:"SET-USER-DATA",data:{userName:e,token:t,isSignIn:n}}},Ge=function(e){return{type:"SIGN-UP-SUCCESS",success:e}},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Be({},e,{},t.data);case"SIGN-UP-SUCCESS":return Be({},e,{isSignUp:t.success});default:return e}},We=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(Fe,{userName:this.props.userName,signoutThunkCreator:this.props.signoutThunkCreator,isSignIn:this.props.isSignIn})}}]),t}(a.a.Component),Ye=Object(f.b)((function(e){return{userName:e.auth.userName,isSignIn:e.auth.isSignIn}}),{signoutThunkCreator:function(e,t,n){return function(r){r(qe(e,t,n))}}})(We),He=n(20),Ze=n.n(He),Ke=Q(30),Qe=Object(Z.a)({form:"signup"})((function(e){console.log(e.isSignUp);return e.isSignUp&&e.initialize({username:"",password:""},!0),a.a.createElement("form",{onSubmit:e.handleSubmit,className:Ze.a.wrapAutorization},a.a.createElement("span",{className:Ze.a.title},"Sign up"),a.a.createElement(H.a,{component:te,name:"username",placeholder:"User name",validate:[K,Ke],className:Ze.a.Field}),a.a.createElement(H.a,{component:te,name:"password",placeholder:"Password",validate:[K,Ke],className:Ze.a.Field}),a.a.createElement("button",{className:Ze.a.btn},"Sign up"),a.a.createElement(B.b,{to:"/signin",className:Ze.a.btn},"Sign in"),e.isSignUp&&a.a.createElement("div",{className:Ze.a.done},"DONE"),e.error&&a.a.createElement("div",{className:Ze.a.summeryError},e.error))}));var Xe=Object(f.b)((function(e){return{isSignUp:e.auth.isSignUp}}),{signupThunkCreator:function(e,t){return function(n){return w(e,t).then((function(e){if(201===e.status)n(Ge(!0)),setTimeout((function(){n(Ge(!1))}),2e3);else if(200===e.status){var t=e.data.message.length>0?e.data.message:"Some error";n(Object(ze.a)("signup",{_error:t}))}}))}}})((function(e){return a.a.createElement("div",null,a.a.createElement(Qe,{onSubmit:function(t){var n=t.username,r=t.password;e.signupThunkCreator(n,r)},isSignUp:e.isSignUp}))})),$e=n(32),et=n.n($e),tt=Object(Z.a)({form:"signin"})((function(e){return e.submitSucceeded&&e.initialize({username:"",password:""},!0),a.a.createElement("form",{onSubmit:e.handleSubmit,className:et.a.wrapAutorization},a.a.createElement("span",{className:et.a.title},"Sign in"),a.a.createElement(H.a,{component:te,name:"username",placeholder:"User name",validate:[K],className:et.a.Field}),a.a.createElement(H.a,{component:te,name:"password",placeholder:"Password",validate:[K],className:et.a.Field}),a.a.createElement("button",{className:et.a.btn},"Sign in"),a.a.createElement(B.b,{to:"/signup",className:et.a.btn},"Sign up"),e.error&&a.a.createElement("div",{className:et.a.summeryError},e.error))}));var nt=Object(f.b)((function(e){return{isSignIn:e.auth.isSignIn}}),{signinThunkCreator:function(e,t){return function(n){return C(e,t).then((function(e){if(200===e.status)if(e.data.message){var t=e.data.message||"Some error";n(Object(ze.a)("signin",{_error:t}))}else{var r=JSON.parse(e.config.data);n(qe(r.username,e.data.token,!0))}}))}}})((function(e){return e.isSignIn?a.a.createElement(i.a,{to:"/products"}):a.a.createElement("div",null,a.a.createElement(tt,{onSubmit:function(t){var n=t.username,r=t.password;e.signinThunkCreator(n,r)}}))}));var rt=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(Ye,null),a.a.createElement(i.b,{path:"/signin",render:function(){return a.a.createElement(nt,null)}}),a.a.createElement(i.b,{path:"/signup",render:function(){return a.a.createElement(Xe,null)}}),a.a.createElement(i.b,{path:"/products",render:function(){return a.a.createElement(G,null)}}),a.a.createElement(i.b,{path:"/addProduct",render:function(){return a.a.createElement(oe,null)}}),a.a.createElement(i.b,{path:"/product/:productId?",render:function(){return a.a.createElement(Ce,null)}}))},at=n(138),ot=n(123);var ct=Object(V.c)({productsPage:L,commentsPage:_e,auth:Ve,form:ot.a}),it=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,st=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),ut=Object(V.e)(ct,st,it(Object(V.a)(at.a)));ut.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.log(n)}}(ut.getState())}));var lt=ut;c.a.render(a.a.createElement(B.a,{basename:"/online_shop"},a.a.createElement(f.a,{store:lt},a.a.createElement(rt,null))),document.getElementById("root"))},32:function(e,t,n){e.exports={root:"SignIn_root__2I579",App:"SignIn_App__1jMWI",wrapAutorization:"SignIn_wrapAutorization__wOy0p",title:"SignIn_title__2N8nR",Field:"SignIn_Field__16rVe",btn:"SignIn_btn__232P_",summeryError:"SignIn_summeryError__WM3JO",done:"SignIn_done__3YsmW"}},35:function(e,t,n){e.exports={addPrducts:"AddProducts_addPrducts__1x32C",inputfile:"AddProducts_inputfile__Mm_Y6",summeryError:"AddProducts_summeryError__1RHbn",done:"AddProducts_done__1mR64",description:"AddProducts_description__2750R",addBtn:"AddProducts_addBtn__26sqo"}},36:function(e,t,n){e.exports={navBar:"NavBar_navBar__51PbK",icon:"NavBar_icon__2gygj",breadCrumbsIcon:"NavBar_breadCrumbsIcon__1DkbA",login:"NavBar_login__3N0WV"}},44:function(e,t,n){e.exports={product:"Product_product__39wZH",img:"Product_img__2CtSr",title:"Product_title__1K3BG",text:"Product_text__A7u8W",seeMore:"Product_seeMore__2lS5_"}},52:function(e,t,n){e.exports={leftPart:"ProductContainer_leftPart__1qyA2",rightPart:"ProductContainer_rightPart__3aG_h",signError:"ProductContainer_signError__2v30p"}},53:function(e,t,n){e.exports={listComment:"Comment_listComment__J6ba_",userName:"Comment_userName__3n22w",rate:"Comment_rate__qt7iY",comment:"Comment_comment__1ML73"}},65:function(e,t,n){e.exports=n.p+"static/media/electronics.9e114e7c.png"},69:function(e,t,n){e.exports={img:"ProductinDetail_img__PilLd",description:"ProductinDetail_description__191-z",text:"ProductinDetail_text__2Neuf"}},86:function(e,t,n){e.exports={productsTitle:"ProductsContainer_productsTitle__1gfFB",products:"ProductsContainer_products__LL8zY",articleIcon:"ProductsContainer_articleIcon__NVz1i"}},91:function(e,t,n){e.exports={commentsField:"CommentsForm_commentsField__3LfkU",submReview:"CommentsForm_submReview__2ozIn"}}},[[164,1,2]]]);
//# sourceMappingURL=main.c32ce4b1.chunk.js.map