(this.webpackJsonpcookingbook=this.webpackJsonpcookingbook||[]).push([[0],{124:function(e,t,n){e.exports={loader:"Loader_loader__PZgQS"}},125:function(e,t,n){e.exports=n.p+"static/media/Spinner-1s-200px.b34c8640.svg"},129:function(e,t,n){e.exports={error:"Form_error__1sUOT"}},133:function(e,t,n){e.exports=n.p+"static/media/article.47b871b8.svg"},134:function(e,t,n){e.exports=n.p+"static/media/add.82ddb728.svg"},135:function(e,t,n){e.exports=n.p+"static/media/login.71e812df.svg"},136:function(e,t,n){e.exports=n.p+"static/media/logout.9956934d.svg"},163:function(e,t,n){e.exports=n(289)},168:function(e,t,n){},169:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(62),c=n.n(o),i=(n(168),n(169),n(31)),s=n(20),u=n(21),l=n(23),m=n(22),d=n(24),p=n(86),f=n.n(p),g=n(10),b=n(124),h=n.n(b),E=n(125),_=n.n(E),v=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("img",{src:_.a,alt:"louder",className:h.a.loader}))},O=n(38),P=n(126).create({baseURL:"http://smktesting.herokuapp.com/api/"}),N=function(){return P.get("products/").then((function(e){return e.data}))},S=function(e,t,n){return P.post("products/",{title:e,img:t,text:n})},j=function(e){return P.get("reviews/".concat(e)).then((function(e){return e.data}))},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return P.post("reviews/".concat(e),{rate:n,text:r},{headers:{AUTHORIZATION:"Token "+t}})},y=function(e,t){return P.post("login/",{username:e,password:t})},w=function(e,t){return P.post("register/",{username:e,password:t})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={products:[],product:[],postProduct:!1,isLoaded:!1},D=function(e){return{type:"ADD-ALL-PRODUCTS",products:e,isLoaded:!0}},T=function(e){return{type:"POST-PRODUCT",success:e}},L=function(e){return{type:"ADD-PRODUCT",id:e,isLoaded:!0}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){N().then((function(n){t(D(n)),t(L(e))}))}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-ALL-PRODUCTS":return A({},e,{products:t.products,isLoaded:t.isLoaded});case"ADD-PRODUCT":return A({},e,{product:e.products.filter((function(e){return e.id===+t.id})),isLoaded:t.isLoaded});case"POST-PRODUCT":return A({},e,{postProduct:t.success});default:return e}},z=n(43),F=n.n(z),R=n(65),M=n.n(R),B=n(9),V=function(e){var t=e.img.match(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g);return a.a.createElement("div",{className:F.a.product},a.a.createElement("h1",{className:F.a.title},e.title),a.a.createElement("div",{className:F.a.text},e.text),a.a.createElement("img",{src:t||M.a,alt:"img",className:F.a.img}),a.a.createElement(B.b,{to:"product/"+e.id,className:F.a.seeMore},"See more>>"))},q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).call(this))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllProductsThunkCreator()}},{key:"render",value:function(){return a.a.createElement("div",null,this.props.isLoaded?null:a.a.createElement(v,null),a.a.createElement("h1",{className:f.a.productsTitle},"Products"),a.a.createElement("div",{className:f.a.products},this.props.products.map((function(e){return a.a.createElement(V,{title:e.title,text:e.text,key:e.id,id:e.id,img:e.img})}))))}}]),t}(a.a.Component),G=Object(g.b)((function(e){return{isLoaded:e.productsPage.isLoaded,products:e.productsPage.products}}),{getAllProductsThunkCreator:U})(q),J=n(7),K=n(32),Y=n.n(K),Z=n(42),H=n(121),Q=function(e){if(!e)return"Field is required"},W=function(e){return function(t){if(t.length>e)return"Max length of symbol is ".concat(e)}},X=n(128),$=n(129),ee=n.n($),te=function(e){var t=e.input,n=e.meta,r=Object(X.a)(e,["input","meta"]),o=n.submitFailed&&n.error?ee.a.error:"",c=n.submitFailed&&n.error?"".concat(n.error):r.placeholder;return a.a.createElement("div",{className:o},a.a.createElement("textarea",Object.assign({},r,t,{placeholder:c})))},ne=W(250),re=Object(H.a)({form:"addProducts"})((function(e){return e.submitSucceeded&&e.reset({title:"",text:"",img:""}),a.a.createElement("form",{className:Y.a.addPrducts,onSubmit:e.handleSubmit},a.a.createElement("div",null,"Product title: ",a.a.createElement("br",null),a.a.createElement(Z.a,{component:te,name:"title",validate:[Q]})),a.a.createElement("div",null,"Product description: ",a.a.createElement("br",null),a.a.createElement(Z.a,{component:te,name:"text",className:Y.a.description,validate:[Q,ne]})),a.a.createElement("div",null,"Photo Url:",a.a.createElement("br",null),a.a.createElement(Z.a,{className:Y.a.mainField,component:te,name:"img",validate:[Q]})),e.error&&a.a.createElement("div",{className:Y.a.summeryError},e.error),e.postProduct&&a.a.createElement("div",{className:Y.a.done},"DONE"),e.error&&a.a.createElement("div",{className:Y.a.summeryError},e.error),a.a.createElement("div",null,a.a.createElement("button",{className:Y.a.addBtn},"Add product")))})),ae=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){var t=e.title,r=e.img,a=e.text;n.props.addProductThunkCreator(t,r,a)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(re,{onSubmit:this.onSubmit,postProduct:this.props.postProduct}))}}]),t}(a.a.Component),oe=Object(J.d)(Object(g.b)((function(e){return{postProduct:e.productsPage.postProduct}}),{addProductThunkCreator:function(e,t,n){return function(r){S(e,t,n).then((function(e){201===e.status&&(r(T(!0)),setTimeout((function(){r(T(!1))}),2e3))}))}}}))(ae),ce=n(51),ie=n.n(ce),se=n(132),ue=n(52),le=n.n(ue),me=function(e){var t=e.img.match(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g);return a.a.createElement("div",null,a.a.createElement("h2",{className:le.a.productTitle},e.title),a.a.createElement("div",null,a.a.createElement("img",{src:t||M.a,alt:"alectronic",className:le.a.img})),a.a.createElement("p",{className:le.a.description},"Product Description"),a.a.createElement("div",{className:le.a.text},e.text))};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe={comments:[],isLoaded:!1},ge=function(e){return function(t){j(e).then((function(e){t({type:"ADD-ALL-COMMENTS",comments:e,isLoaded:!0})}))}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-ALL-COMMENTS":return pe({},e,{comments:t.comments});default:return e}},he=n(69),Ee=n.n(he),_e=Object(H.a)({form:"addProducts"})((function(e){return e.submitSucceeded&&e.reset({text:""}),a.a.createElement("div",null,a.a.createElement("form",{className:Ee.a.addPrducts,onSubmit:e.handleSubmit},a.a.createElement("div",null,a.a.createElement(Z.a,{component:te,name:"text",validate:[Q],className:Ee.a.commentsField}),a.a.createElement("button",{className:Ee.a.submReview},"Submit Review"))))})),ve=n(131),Oe=n.n(ve),Pe=function(e){return a.a.createElement("div",null,a.a.createElement(Oe.a,{count:5,onChange:e.ratingChanged,size:24,color2:"#ffd700"}))},Ne=n(53),Se=n.n(Ne);var je=function(e){return a.a.createElement("li",{className:Se.a.listComment},a.a.createElement("p",{className:Se.a.userName},e.userName+" at "+e.created_at),a.a.createElement("p",{className:Se.a.rate},"Rate: "+e.rate),a.a.createElement("span",{className:Se.a.comment},"Comment: "+e.text))},Ce=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={noAthorization:!1},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.productId;this.props.getAllProductsThunkCreator(e),this.props.getAllCommentsThunkCreator(e)}},{key:"render",value:function(){var e,t=this,n=this.props.comments.map((function(e){return a.a.createElement(je,{userName:e.created_by.username,created_at:e.created_at,rate:e.rate,text:e.text,key:e.id})}));return this.props.product?a.a.createElement("div",{className:ie.a.product},a.a.createElement("div",{className:ie.a.leftPart},a.a.createElement(me,{img:this.props.product.img,title:this.props.product.title,text:this.props.product.text})),a.a.createElement("div",{className:ie.a.rightPart},a.a.createElement(Pe,{ratingChanged:function(t){e=t}}),a.a.createElement(_e,{onSubmit:function(n){var r=n.text,a=t.props.match.params.productId,o=t.props.token;o?t.props.postCommentThunkCreator(a,o,e,r):t.setState({noAthorization:!0})},comments:this.props.comments}),this.state.noAthorization&&a.a.createElement("div",{className:ie.a.signError},"You should sign in first"),a.a.createElement("h3",null,"Reviews"),a.a.createElement("ul",null,n))):a.a.createElement(v,null)}}]),t}(a.a.Component),ye=Object(se.a)(i.f,Object(g.b)((function(e){return{isLoaded:e.productsPage.isLoaded,product:e.productsPage.product[0],comments:e.commentsPage.comments,token:e.auth.token}}),{getAllProductsThunkCreator:U,getAllCommentsThunkCreator:ge,postCommentThunkCreator:function(e,t,n,r){return function(a){C(e,t,n,r).then((function(t){200===t.status&&a(ge(e))}))}}}))(Ce),we=n(35),ke=n.n(we),Ae=n(133),xe=n.n(Ae),De=n(134),Te=n.n(De),Le=n(135),Ue=n.n(Le),Ie=n(136),ze=n.n(Ie);var Fe=function(e){return a.a.createElement("div",{className:ke.a.navBar},a.a.createElement(B.b,{to:"/addProduct",title:"add product"},a.a.createElement("img",{className:ke.a.icon,src:Te.a,alt:"menu"})),a.a.createElement(B.b,{to:"/products",title:"products"},a.a.createElement("img",{className:ke.a.icon,src:xe.a,alt:"productList"})),e.isSignIn?a.a.createElement(B.b,{to:"/signin"},a.a.createElement("img",{src:ze.a,alt:"logout",className:ke.a.icon,onClick:function(){e.signoutThunkCreator(null,null,!1)}}),a.a.createElement("span",{className:ke.a.login},e.userName)):a.a.createElement(B.b,{to:"/signin"},a.a.createElement("img",{src:Ue.a,alt:"users",className:ke.a.icon})))},Re=n(28);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve={userName:null,token:null,isSignIn:!1,isSignUp:!1},qe=function(e,t,n){return{type:"SET-USER-DATA",data:{userName:e,token:t,isSignIn:n}}},Ge=function(e){return{type:"SIGN-UP-SUCCESS",success:e}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Be({},e,{},t.data);case"SIGN-UP-SUCCESS":return Be({},e,{isSignUp:t.success});default:return e}},Ke=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(Fe,{userName:this.props.userName,signoutThunkCreator:this.props.signoutThunkCreator,isSignIn:this.props.isSignIn})}}]),t}(a.a.Component),Ye=Object(g.b)((function(e){return{userName:e.auth.userName,isSignIn:e.auth.isSignIn}}),{signoutThunkCreator:function(e,t,n){return function(r){r(qe(e,t,n))}}})(Ke),Ze=n(8),He=n.n(Ze),Qe=W(30),We=Object(H.a)({form:"signup"})((function(e){return e.isSignUp&&e.initialize({username:"",password:""},!0),a.a.createElement("form",{onSubmit:e.handleSubmit,className:He.a.wrapAutorization},a.a.createElement("span",{className:He.a.title},"Sign up"),a.a.createElement(Z.a,{component:te,name:"username",placeholder:"User name",validate:[Q,Qe],className:He.a.Field}),a.a.createElement(Z.a,{component:te,name:"password",placeholder:"Password",validate:[Q,Qe],className:He.a.Field}),a.a.createElement("button",{className:He.a.btn},"Sign up"),a.a.createElement(B.b,{to:"/signin",className:He.a.btn},"Sign in"),e.isSignUp&&a.a.createElement("div",{className:He.a.done},"DONE"),e.error&&a.a.createElement("div",{className:He.a.summeryError},e.error))})),Xe=Object(H.a)({form:"signin"})((function(e){return e.submitSucceeded&&e.initialize({username:"",password:""},!0),a.a.createElement("form",{onSubmit:e.handleSubmit,className:He.a.wrapAutorization},a.a.createElement("span",{className:He.a.title},"Sign in"),a.a.createElement(Z.a,{component:te,name:"username",placeholder:"User name",validate:[Q],className:He.a.Field}),a.a.createElement(Z.a,{component:te,name:"password",placeholder:"Password",validate:[Q],className:He.a.Field}),a.a.createElement("button",{className:He.a.btn},"Sign in"),a.a.createElement(B.b,{to:"/signup",className:He.a.btn},"Sign up"),e.error&&a.a.createElement("div",{className:He.a.summeryError},e.error))})),$e=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=function(t){var n=t.username,r=t.password;e.props.signinThunkCreator(n,r)},n=function(t){var n=t.username,r=t.password;e.props.signupThunkCreator(n,r)};return this.props.isSignIn?a.a.createElement(i.a,{to:"/products"}):a.a.createElement("div",{className:He.a.loginForm},a.a.createElement(B.a,{basename:"/online_shop"},">",a.a.createElement(i.b,{path:"/signin",render:function(){return a.a.createElement(Xe,{onSubmit:t,isSignIn:e.props.isSignIn})}}),a.a.createElement(i.b,{path:"/signup",render:function(){return a.a.createElement(We,{onSubmit:n,isSignUp:e.props.isSignUp})}})))}}]),t}(a.a.Component),et=Object(g.b)((function(e){return{isSignUp:e.auth.isSignUp,isSignIn:e.auth.isSignIn}}),{signinThunkCreator:function(e,t){return function(n){return y(e,t).then((function(e){if(200===e.status)if(e.data.message){var t=e.data.message||"Some error";n(Object(Re.a)("signin",{_error:t}))}else{var r=JSON.parse(e.config.data);n(qe(r.username,e.data.token,!0))}}))}},signupThunkCreator:function(e,t){return function(n){return w(e,t).then((function(e){if(201===e.status)n(Ge(!0)),setTimeout((function(){n(Ge(!1))}),2e3);else if(200===e.status){var t=e.data.message.length>0?e.data.message:"Some error";n(Object(Re.a)("signup",{_error:t}))}}))}}})($e);var tt=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(Ye,null),a.a.createElement(i.b,{path:"/signin",render:function(){return a.a.createElement(et,null)}}),a.a.createElement(i.b,{path:"/products",render:function(){return a.a.createElement(G,null)}}),a.a.createElement(i.b,{path:"/addProduct",render:function(){return a.a.createElement(oe,null)}}),a.a.createElement(i.b,{path:"/product/:productId?",render:function(){return a.a.createElement(ye,null)}}))},nt=n(137),rt=n(122),at=Object(J.c)({productsPage:I,commentsPage:be,auth:Je,form:rt.a}),ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.d,ct=Object(J.e)(at,ot(Object(J.a)(nt.a)));c.a.render(a.a.createElement(B.a,{basename:"/online_shop"},a.a.createElement(g.a,{store:ct},a.a.createElement(tt,null))),document.getElementById("root"))},32:function(e,t,n){e.exports={addPrducts:"AddProducts_addPrducts__1x32C",inputfile:"AddProducts_inputfile__Mm_Y6",summeryError:"AddProducts_summeryError__1RHbn",done:"AddProducts_done__1mR64",description:"AddProducts_description__2750R",addBtn:"AddProducts_addBtn__26sqo"}},35:function(e,t,n){e.exports={navBar:"NavBar_navBar__51PbK",icon:"NavBar_icon__2gygj",breadCrumbsIcon:"NavBar_breadCrumbsIcon__1DkbA",login:"NavBar_login__3N0WV"}},43:function(e,t,n){e.exports={product:"Product_product__39wZH",img:"Product_img__2CtSr",title:"Product_title__1K3BG",icon:"Product_icon__3_1gg",text:"Product_text__A7u8W",seeMore:"Product_seeMore__2lS5_"}},51:function(e,t,n){e.exports={leftPart:"ProductContainer_leftPart__1qyA2",rightPart:"ProductContainer_rightPart__3aG_h",signError:"ProductContainer_signError__2v30p"}},52:function(e,t,n){e.exports={img:"ProductinDetail_img__PilLd",description:"ProductinDetail_description__191-z",text:"ProductinDetail_text__2Neuf"}},53:function(e,t,n){e.exports={listComment:"Comment_listComment__J6ba_",userName:"Comment_userName__3n22w",rate:"Comment_rate__qt7iY",comment:"Comment_comment__1ML73"}},65:function(e,t,n){e.exports=n.p+"static/media/electronics.9e114e7c.png"},69:function(e,t,n){e.exports={commentsField:"CommentsForm_commentsField__3LfkU",submReview:"CommentsForm_submReview__2ozIn"}},8:function(e,t,n){e.exports={wrapAutorization:"AuthorizationContainer_wrapAutorization__1V9-p",title:"AuthorizationContainer_title__KfZ8U",Field:"AuthorizationContainer_Field__S5VQI",btn:"AuthorizationContainer_btn__MTtDo",summeryError:"AuthorizationContainer_summeryError__2in6K",done:"AuthorizationContainer_done__2jfDI"}},86:function(e,t,n){e.exports={productsTitle:"ProductsContainer_productsTitle__1gfFB",products:"ProductsContainer_products__LL8zY",articleIcon:"ProductsContainer_articleIcon__NVz1i"}}},[[163,1,2]]]);
//# sourceMappingURL=main.31260f8a.chunk.js.map